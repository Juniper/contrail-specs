{
  "comments": [
    {
      "key": {
        "uuid": "870000bf_7b8aad1b",
        "filename": "vrouter_agent_debugging_tool.md",
        "patchSetId": 7
      },
      "lineNbr": 131,
      "author": {
        "id": 437
      },
      "writtenOn": "2019-08-02T07:26:31Z",
      "side": 1,
      "message": "1) Do understood the idea correctly that it is a kind of ‘sos-tool’ that helps people to collect all the required data from cluster for reporting bugs/issues and troubleshooting?\n \n2) Am I correct that it is to be run outside of cluster – somewhere on an orchestrating node.\ne.g. in RHOSP it is undercloud node, in case of ansible – it is a node where ansible playbooks are run.. etc?\n(At least in tripleo it can be run only on undercloud because only undercloud has ssh key for that.  And in other cases orchestrating nodes always have ssh access to the contrail nodes because they do deploy).\n\n3) What do you think of the following idea about user-workflow with this tools:\nWe can make easy to use for end-user with avoiding creation of new yaml input file and running it from the same orchestrating node where deloy was done from: \n- in case of ansible we may provide a helping playbook that will run the tool via docker run on localhost on orchestrator.  It may use the same instances.yaml as was used for deploy (or a modified copy of that if not all nodes are to be processed)\n- in tripleo we may provide helping bash script (that can be put in ~/tripleo-heat-templates/tools/contrail folder as usually this folder is used for deploy). It may use openstack commands to discover nodes for processing by default (an may take a parameter to filter ndoes if not all to be processed)\n - for openshift I suppose there would be  something similar to ansible",
      "range": {
        "startLine": 125,
        "startChar": 0,
        "endLine": 131,
        "endChar": 0
      },
      "revId": "e3455db7e30a7e2bf08b31dbf3c9a66ed0a1592b",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba17481e_7ee962a2",
        "filename": "vrouter_agent_debugging_tool.md",
        "patchSetId": 7
      },
      "lineNbr": 131,
      "author": {
        "id": 705
      },
      "writtenOn": "2019-08-02T10:35:52Z",
      "side": 1,
      "message": "Hi Alex,\nRight now we are targeting this for below deployment:\n1. rhosp deployed using rhosp_director.\n2. openstack deployed using ansible.\n3. kubernetes deployed using ansible.\n\nYes the tools container needs to be run from undercloud in rhosp setup and in case of ansible it is a node where ansible playbooks are run. But we can\u0027t use the exiting yaml file as it doesn\u0027t have some below field:\n\u0027gcore_needed\u0027 which is needed to decide if we want to collect gcore\n\u0027deployment_method\u0027and \u0027vim\u0027 which are needed to decide the vrouter_agent container name and log file location and they may very depending on the orchestrator.\nHence we have separate yaml file. Also I am not sure whether we use any yaml file in rhosp kind of deployement. \nFor now we are making sure that is works for ansible and rhosp and will add support so that it works on openshift and tripleo.",
      "parentUuid": "870000bf_7b8aad1b",
      "range": {
        "startLine": 125,
        "startChar": 0,
        "endLine": 131,
        "endChar": 0
      },
      "revId": "e3455db7e30a7e2bf08b31dbf3c9a66ed0a1592b",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c69a99c_f3ff9784",
        "filename": "vrouter_agent_debugging_tool.md",
        "patchSetId": 7
      },
      "lineNbr": 131,
      "author": {
        "id": 437
      },
      "writtenOn": "2019-08-02T13:59:17Z",
      "side": 1,
      "message": "So, if it is run on underlcoud node and on ansible node then there would be no helping script in /usr/bin/.  Because these nodes are not provisioned by us. I mean, there are no any contrail init or alike container that is run on these nodes during deploy.\n\nHow is it supposed to be run by user then?\n\nps: tripleo and rhosp is the same.",
      "parentUuid": "ba17481e_7ee962a2",
      "range": {
        "startLine": 125,
        "startChar": 0,
        "endLine": 131,
        "endChar": 0
      },
      "revId": "e3455db7e30a7e2bf08b31dbf3c9a66ed0a1592b",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    }
  ]
}